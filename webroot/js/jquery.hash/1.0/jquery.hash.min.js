/*!
 * jquery.hash.js
 * @author 云淡然 http://qianduanblog.com
 * @versio 1.0
 * @for ie9+、chrome、firefox
 * 2013年11月1日12:00:03
 */
!function(t,r){function e(n){return"string"==t.type(n)||"number"==t.type(n)}function o(n){return e(n)?encodeURIComponent(n):n}function a(n){return e(n)?decodeURIComponent(n):n}function s(n,t){for(var r in n)if(n[r]==t[r])return!1;return!0}function h(n,t){for(var r in n)if(n[r]!=t[r])return!0;return!1}function u(n){var t={},r="!";if(n=n.replace(b,""),""===n)return t;switch(r=n.charAt(0),g.test(r)||(r=""),n=n.replace(g,""),n=n.replace(v,""),r){case"!":t=c(n),H.hashType="!";break;case"?":t=f(n),H.hashType="?";break;default:t[n]="",H.hashType="!"}return t}function c(n){for(var r,o=n.split("/"),a={},i=[],s=[],h=!1,u=0,c=o.length;c>u;u++)r=t.trim(o[u]),e(r)&&""!==r&&(h?s.push(r):i.push(r),h=!h);for(u=0,c=i.length;c>u;u++)a[i[u]]=s[u];return a}function f(n){for(var t,e,o,i=n.split("&"),s={},h=0,u=i.length;u>h;h++)t=i[h].split("="),e=a(t[0]),o=t[1]===r?"":a(t[1]),""!==e&&e!==r&&(s[e]=o);return s}function l(n){var t,r=[];for(t in n)r.push(o(t)+"/"+o(n[t]));return"!"+r.join("/")}function p(n){var t,r=[];for(t in n)r.push(o(t)+"="+o(n[t]));return"?"+r.join("&")}function d(n,t){for(var r in t)e(r)&&e(t[r])&&(n[r]=t[r]);switch(H.hashType){case"!":default:strHash=l(n);break;case"?":strHash=p(n)}return window.location.hash=strHash,strHash}function w(n,t){for(var r=0,o=t.length;o>r;r++)e(t[r])&&delete n[t[r]];switch(H.hashType){case"!":default:strHash=l(n);break;case"?":strHash=p(n)}return window.location.hash=strHash,strHash}function y(r,e,o,a){var c,f={type:e,key:o,fn:a};O.push(f),c=function(){var e=window.location.hash;for(objNow=u(e),objOld={},objNew={},i=0,j=0,m=0,n=0,f={},o=[],t.isEmptyObject(N)&&(N=r),r=N,N=objNow,i=0,j=O.length;j>i;i++){for(f=O[i],o=f.key,a=f.fn,objOld={},objNew={},m=0,n=o.length;n>m;m++)objOld[o[m]]=r[o[m]],objNew[o[m]]=objNow[o[m]];"and"==f.type?s(objOld,objNew)&&a(r,objNow):h(objOld,objNew)&&a(r,objNow)}},T||(T=1,window.addEventListener("hashchange",c,0))}var b=/^#*/,g=/^[!?]*/,v=/^[\/&]*|[\/&]*$/g,N={},H={hashType:"!"},T=0,O=[];t.extend({hash:function(){var n,r,o,a=arguments,i=arguments.length,s=window.location.hash,h={},c={},f={};if(0==i)return u(s);if(1==i&&e(a[0]))return h=u(s),h[a[0]];if(1==i&&"array"==t.type(a[0])){for(h=u(s),r=a[0].length,n=0;r>n;n++)o=a[0][n],c[o]=h[o];return c}return 2==i&&e(a[0])&&e(a[1])?(h=u(s),f[a[0]]=a[1],d(h,f)):3==i&&e(a[0])&&e(a[1])&&"string"==t.type(a[2])?(h=u(s),f[a[0]]=a[1],H.hashType=a[2],d(h,f)):1==i&&"object"==t.type(a[0])?(h=u(s),d(h,a[0])):2==i&&"object"==t.type(a[0])&&"string"==t.type(a[1])?(h=u(s),H.hashType=a[1],d(h,a[0])):2==i&&e(a[0])&&null===a[1]?(h=u(s),w(h,[a[0]])):2==i&&t.isArray(a[0])&&null===a[1]?(h=u(s),w(h,a[0])):1==i&&null===a[0]?(window.location.hash="",""):void(3==i&&"listen"===a[0]&&e(a[1])&&t.isFunction(a[2])?(h=u(s),y(h,"and",[a[1]],a[2])):3==i&&"listenAnd"===a[0]&&t.isArray(a[1])&&t.isFunction(a[2])?(h=u(s),y(h,"and",a[1],a[2])):3==i&&"listenOr"===a[0]&&t.isArray(a[1])&&t.isFunction(a[2])&&(h=u(s),y(h,"or",a[1],a[2])))}}),t.hash.defaults=H}(jQuery);