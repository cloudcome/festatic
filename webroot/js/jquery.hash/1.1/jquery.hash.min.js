/*!
 * jquery.hash.js
 * @author ydr.me
 * @version 1.1
 */
!function(r,t){function e(n){return"string"==r.type(n)||"number"==r.type(n)}function o(n){return e(n)?encodeURIComponent(n):n}function a(n){return e(n)?decodeURIComponent(n):n}function s(n,r){for(var t in n)if(n[t]==r[t])return!1;return!0}function h(n,r){for(var t in n)if(n[t]!=r[t])return!0;return!1}function u(n){var r={},t="!";if(n=(n.match(/#([^#]*)$/)||["",""])[1],""===n)return r;switch(n=n.replace(/^.*([!\?])/,"$1"),t=n.charAt(0),"!"!=t&&"?"!=t&&(t=g.hashType),n=n.replace(/^[!\?]*/,""),n=n.replace(/^[\/&]*|[\/&]*$/g,""),t){case"!":r=c(n),g.hashType="!";break;case"?":r=l(n),g.hashType="?";break;default:r[n]="",g.hashType="!"}return r}function c(n){for(var t,o=n.split("/"),a={},i=[],s=[],h=!1,u=0,c=o.length;c>u;u++)t=r.trim(o[u]),e(t)&&""!==t&&(h?s.push(t):i.push(t),h=!h);for(u=0,c=i.length;c>u;u++)a[i[u]]=s[u];return a}function l(n){for(var r,e,o,i=n.split("&"),s={},h=0,u=i.length;u>h;h++)r=i[h].split("="),e=a(r[0]),o=r[1]===t?"":a(r[1]),""!==e&&e!==t&&(s[e]=o);return s}function f(n){var r,t=[];for(r in n)t.push(o(r)+"/"+o(n[r]));return"!"+t.join("/")}function p(n){var r,t=[];for(r in n)t.push(o(r)+"="+o(n[r]));return"?"+t.join("&")}function d(n,r){for(var t in r)e(t)&&e(r[t])&&(n[t]=r[t]);switch(g.hashType){case"!":default:strHash=f(n);break;case"?":strHash=p(n)}return window.location.hash=strHash,strHash}function w(n,r){for(var t=0,o=r.length;o>t;t++)e(r[t])&&delete n[r[t]];switch(g.hashType){case"!":default:strHash=f(n);break;case"?":strHash=p(n)}return window.location.hash=strHash,strHash}function y(t,e,o,a){var c,l={type:e,key:o,fn:a};T.push(l),c=function(){var e=window.location.hash;for(objNow=u(e),objOld={},objNew={},i=0,j=0,m=0,n=0,l={},o=[],r.isEmptyObject(b)&&(b=t),t=b,b=objNow,i=0,j=T.length;j>i;i++){for(l=T[i],o=l.key,a=l.fn,objOld={},objNew={},m=0,n=o.length;n>m;m++)objOld[o[m]]=t[o[m]],objNew[o[m]]=objNow[o[m]];"and"==l.type?s(objOld,objNew)&&a(t,objNow):h(objOld,objNew)&&a(t,objNow)}},v||(v=1,window.addEventListener("hashchange",c,0))}var b={},g={hashType:"!"},v=0,T=[];r.extend({hash:function(){var n,t,o,a=arguments,i=arguments.length,s=window.location.hash,h={},c={},l={};if(0==i)return u(s);if(1==i&&e(a[0]))return h=u(s),h[a[0]];if(1==i&&"array"==r.type(a[0])){for(h=u(s),t=a[0].length,n=0;t>n;n++)o=a[0][n],c[o]=h[o];return c}return 2==i&&e(a[0])&&e(a[1])?(h=u(s),l[a[0]]=a[1],d(h,l)):3==i&&e(a[0])&&e(a[1])&&"string"==r.type(a[2])?(h=u(s),l[a[0]]=a[1],g.hashType=a[2],d(h,l)):1==i&&"object"==r.type(a[0])?(h=u(s),d(h,a[0])):2==i&&"object"==r.type(a[0])&&"string"==r.type(a[1])?(h=u(s),g.hashType=a[1],d(h,a[0])):2==i&&e(a[0])&&null===a[1]?(h=u(s),w(h,[a[0]])):2==i&&r.isArray(a[0])&&null===a[1]?(h=u(s),w(h,a[0])):1==i&&null===a[0]?(o=r(window).scrollTop(),window.location.hash="",r(window).scrollTop(o),""):void(3==i&&"listen"===a[0]&&e(a[1])&&r.isFunction(a[2])?(h=u(s),y(h,"and",[a[1]],a[2])):3==i&&"listenAnd"===a[0]&&r.isArray(a[1])&&r.isFunction(a[2])?(h=u(s),y(h,"and",a[1],a[2])):3==i&&"listenOr"===a[0]&&r.isArray(a[1])&&r.isFunction(a[2])&&(h=u(s),y(h,"or",a[1],a[2])))}}),r.hash.defaults=g}(jQuery);