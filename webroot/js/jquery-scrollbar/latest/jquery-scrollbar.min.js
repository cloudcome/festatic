/*!
 * jquery.fn.scrollbar
 * @author ydr.me
 * @version 1.2
 * @require http://festatic.aliapp.com/css/jquery-scrollbar/default.min.css
 * @require http://festatic.aliapp.com/js/jquery-drag/latest/jquery-drag.min.js
 * @require http://festatic.aliapp.com/js/jquery-mousewheel/latest/jquery-mousewheel.min.js
 * 2014年7月3日18:18:53
 */
!function(t,e){"use strict";function a(t,e){var a=this;a.$element=i(t),a.options=e}function n(){var t,e=i("<iframe>").appendTo(r),a=i("<div/>").appendTo(e.contents()[0].body);return a.css({width:100,height:100,position:"absolute",top:-999999,left:-999999,padding:0,margin:0,overflow:"scroll"}),t=a[0].clientWidth,e.remove(),100>t}var o="jquery-scrollbar",i=t.$,r=t.document.body,s=n(),m="DOMSubtreeModified DOMNodeInserted DOMNodeRemoved DOMNodeRemovedFromDocument DOMNodeInsertedIntoDocument DOMAttrModified DOMCharacterDataModified",h={width:"auto",height:"auto",mousewheelAsix:"y",duration:345,speed:30,minWidth:100,minHeight:100,canCrossBoundary:!0,onscrollx:i.noop,onscrolly:i.noop};i.fn.scrollbar=function(t){var n,r,s="string"===i.type(t),m=[].slice.call(arguments,1),u=i.extend({},h);if(s&&"_"!==s[0]){if(!this.length)return;return n=i(this[0]),r=n.data(o),r||n.data(o,r=new a(n[0],u)._init()),a.prototype[t]?a.prototype[t].apply(r,m):e}return s||(u=i.extend(u,t)),this.each(function(){var t=this,e=i(t).data(o);e||i(t).data(o,e=new a(t,u)._init())})},a.prototype={_init:function(){var t,e,a,n,r,h,u=this,c=u.$element,l=c[0].tagName;return"TBODY"===l&&(c=c.closest("table").clone().insertAfter(c.closest("table")).empty().append(c)),c.wrap('<div class="'+o+'-container"/>'),t=c.parent(),s&&(c.wrap('<div class="'+o+'-content"/>'),e=c.parent(),a=i('<div class="'+o+'-track-x"/>').appendTo(t),n=i('<div class="'+o+'-track-y"/>').appendTo(t),r=i('<div class="'+o+'-thumb-x"/>').appendTo(a),h=i('<div class="'+o+'-thumb-y"/>').appendTo(n)),u.$container=t,u.$content=e,u.$trackX=a,u.$trackY=n,u.$thumbX=r,u.$thumbY=h,u.thumbX=0,u.thumbY=0,c.bind(m,i.proxy(u.render,u)),u.render(),u},_drag:function(){var t=this,e=t.$trackX,a=t.$trackY,n=t.$thumbX,o=t.$thumbY;n.drag({axis:"x",cursor:!1,min:{left:0},max:{left:t.maxX},ondragstart:function(){e.addClass("active")},ondrag:function(){t.thumbX=parseInt(n.css("left")),t._scroll("x",!0)},ondragend:function(){e.removeClass("active")}}),o.drag({axis:"y",cursor:!1,min:{top:0},max:{top:t.maxY},ondragstart:function(){a.addClass("active")},ondrag:function(){t.thumbY=parseInt(o.css("top")),t._scroll("y",!0)},ondragend:function(){a.removeClass("active")}})},_wheel:function(){if(s){var t=this,e=t.options,a=t.$container,n="x"===e.mousewheelAsix?t.$trackX:t.$trackY;a.mousewheel({onmousewheeltart:function(){n.addClass("active")},onmousewheel:function(n){"x"===e.mousewheelAsix?(t.thumbX+=-n*t.speedX,n>0&&t.thumbX<=0||0>n&&t.thumbX>=t.maxX?e.canCrossBoundary&&a.mousewheel("preventDefault",!1):e.canCrossBoundary&&a.mousewheel("preventDefault",!0),t._scroll("x")):(t.thumbY+=-n*t.speedY,n>0&&t.thumbY<=0||0>n&&t.thumbY>=t.maxY?e.canCrossBoundary&&a.mousewheel("preventDefault",!1):e.canCrossBoundary&&a.mousewheel("preventDefault",!0),t._scroll("y"))},onmousewheelend:function(){n.removeClass("active")}})}},_click:function(){if(s){var t=this,e=t.$trackX,a=t.$trackY;e.click(function(e){if(e.target===this){var a=e.pageX-i(this).offset().left,n=t.thumbX,o=n+t.thumbW;t.thumbX=n>a?a:n+a-o,t._scroll("x",t.options.duration)}return!1}),a.click(function(e){if(e.target===this){var a=e.pageY-i(this).offset().top,n=t.thumbY,o=n+t.thumbH;t.thumbY=n>a?a:n+a-o,t._scroll("y",t.options.duration)}return!1})}},_scroll:function(t,e,a){var n,o,r=this,m=r.options,h=0,u=e===!0;h=u?0:e||0,a=a||i.noop,~t.indexOf("x")&&(r.thumbX<0&&(r.thumbX=0),r.thumbX>r.maxX&&(r.thumbX=r.maxX),n=r.maxX?r.thumbX*r.maxW/r.maxX:0,s?(u||r.$trackX.addClass("active"),r.$thumbX.animate({left:r.thumbX},h),r.$content.animate({left:-n},h,function(){u||r.$trackX.removeClass("active"),a.call(this)})):r.$container.animate({scrollLeft:n},h,a),m.onscrollx.call(r.$element[0],r.thumbX/r.maxX)),~t.indexOf("y")&&(r.thumbY<0&&(r.thumbY=0),r.thumbY>r.maxY&&(r.thumbY=r.maxY),o=r.maxY?r.thumbY*r.maxH/r.maxY:0,s?(u||r.$trackY.addClass("active"),r.$thumbY.animate({top:r.thumbY},h),r.$content.animate({top:-o},h,function(){u||r.$trackY.removeClass("active"),a.call(this)})):r.$container.animate({scrollTop:o},h,a),m.onscrolly.call(r.$element[0],r.thumbY/r.maxY)),"xy"===t&&s&&!u&&(r.$trackX.removeClass("active"),r.$trackY.removeClass("active"))},options:function(t,a){if("string"===i.type(t)&&a===e)return this.options[t];var n={};"object"===i.type(t)?n=t:n[t]=a,this.options=i.extend(this.options,n)},render:function(t){t&&(this.options=i.extend(this.options,t));var e=this,a=e.options,n=e.$element,o=e.$container,r=n.outerWidth(),m=n.outerHeight(),h="auto"===a.width?o.innerWidth():a.width,u="auto"===a.height?o.innerHeight():a.height;if(!s)return o.css({width:h,height:u,"overflow-scrolling":"touch",overflow:"auto"}),e.maxX=e.maxW=r-o[0].clientWidth,e.maxY=e.maxH=m-o[0].clientHeight,e.has1stRender||o.scroll(function(){e.thumbX=this.scrollLeft,e.thumbY=this.scrollTop}),e.has1stRender=!0,e;var c,l,d=e.$trackX,x=e.$trackY,f=e.$thumbX,p=e.$thumbY,b=a.width*h/r,Y=a.height*u/m;return o.css({width:h,height:u}),b<a.minWidth&&(b=a.minWidth),f.css("width",b),Y<a.minHeight&&(Y=a.minHeight),p.css("height",Y),e.maxW=r-h,e.maxH=m-u,e.maxW>0?d.show():d.hide(),e.maxH>0?x.show():x.hide(),c=e.maxX?e.thumbX/e.maxX:0,l=e.maxY?e.thumbY/e.maxY:0,e.thumbW=b,e.thumbH=Y,e.maxX=h-b,e.maxY=u-Y,e.maxX<0&&(e.maxX=0),e.maxY<0&&(e.maxY=0),e.speedX=e.maxX*a.speed/e.maxW,e.speedY=e.maxY*a.speed/e.maxH,e.has1stRender?(e.thumbX=c*e.maxX,e.thumbY=l*e.maxY,e._scroll("xy")):e._click(),i.fn.drag&&(e._drag(),f.drag("options",{max:{left:e.maxX}}),p.drag("options",{max:{top:e.maxY}})),i.fn.mousewheel&&e._wheel(),e.has1stRender=!0,e},x:function(t,a){var n,o=this,r=o.options,s=o.$element;return t===e?o.maxX?o.thumbX/o.maxX:0:void("number"===i.type(t)?(o.thumbX=t*o.maxX,o._scroll("x",r.duration,a)):(n=i(t,s),n.length&&(o.thumbX=o.maxX*(n.offset().left-s.offset().left)/o.maxW,o._scroll("x",r.duration,a))))},y:function(t,a){var n,o=this,r=o.options,s=o.$element;return t===e?o.maxY?o.thumbY/o.maxY:0:void("number"===i.type(t)?(o.thumbY=t*o.maxY,o._scroll("y",r.duration,a)):(n=i(t,s),n.length&&(o.thumbY=o.maxY*(n.offset().top-s.offset().top)/o.maxH,o._scroll("y",r.duration,a))))},top:function(t){return this.y(0,t)},right:function(t){return this.x(1,t)},bottom:function(t){return this.y(1,t)},left:function(t){return this.x(0,t)}}}(this);