/*!
 * jquery.notification.js
 * @author 云淡然 http://qianduanblog.com
 * @version 1.0
 * 2013年10月2日1:40:06
 */
(function(d,g,b){var k,e=[],c={title:"通知标题",body:"通知内容",tag:"",icon:"http://festatic.aliapp.com/img/icon.png",onshow:function(){},onclose:function(){},onclick:function(){},onerror:function(){}},j=g.webkitNotifications;d.support.notification=!!j;d.extend({notification:function(){var n=arguments,p=n.length,l,o=0,m=0;if(p==2&&i(n[0])&&i(n[1])){l={};l.title=n[0];l.body=n[1];f(l);}else{if(p==1&&d.type(n[0])=="object"){f(n[0]);}else{if(p==1&&n[0]===null){h();}}}}});d.notification.defaults=c;function i(l){return d.type(l)=="string"||d.type(l)=="number";}function a(){if(!d.support.notification){return -1;}return j.checkPermission();}function f(n){if(!d.support.notification){return;}var l=a(),m,n=d.extend({},c,n);if(l==0){m=j.createNotification(n.icon,n.title,n.body);m.onshow=function(){n.onshow.call(m);};m.onclose=function(){n.onclose.call(m);};m.onclick=function(){n.onclick.call(m);};m.onerror=function(){n.onerror.call(m);};e.push(m);m.show();}else{if(l==1){j.requestPermission(arguments.callee);}else{throw ("用户已禁止桌面通知！");}}}function h(){if(!d.support.notification){return;}var l,n=0,m=e.length;for(;n<m;n++){l=e[n];l.close();l.cancel();}e=[];return true;}})(jQuery,this);