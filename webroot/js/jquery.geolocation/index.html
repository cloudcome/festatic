<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta name="author" content="云淡然;http://ydr.me">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<link rel="stylesheet" href="/bootstrap/3.1.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="/bootstrap/3.1.1/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="/css/prettify/bootstrap.css">
	<title>jquery.geolocation.js docs - 前端静态资源</title>
</head>



<body>
	<div class="jumbotron">
		<div class="container">
			<h1>jquery.geolocation.js docs</h1>
			<p>作者：云淡然</p>
			<p>兼容：chrome（5.0+）、ie（9.0+）、firefox（3.5+）、iphone（3.0+）、android（2.0+）</p>
		</div>
	</div>
	<div class="container">
		<div class="panel panel-default">
			<div class="panel-heading">1、插件说明</div>
			<div class="panel-body">
				<ol>
					<li>
						获取地理位置，仅部分浏览器支持，与电脑、手机、平板等系统都有关系！
					</li>
				</ol>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">2、插件API</div>
			<div class="panel-body">
				<pre class="prettyprint linenums">// 1.默认配置
$.geolocation.defaults = {
	// onsuccess回调
	// 参考：http://www.w3.org/TR/geolocation-API/#position
	// 参数1： latitude （纬度，单位°）
	// 参数2： longitude （经度，单位°）
	// 参数3： altitude （高度，单位m）
	// 参数4： accuracy （精度，单位m）
	// 参数5： altitudeAccuracy （高精度，单位m）
	// 参数6： heading （角度，[0,360)）
	// 参数7： speed （速度，单位m/s）
	onsuccess: function () {},
	// onerror回调
	// 参考：http://www.w3.org/TR/geolocation-API/#position-error
	// 参数1：code
	// 参数1值1：用户已禁止共享地理位置信息
	// 参数1值2：地理位置信息不可用
	// 参数1值3：地理位置信息获取超时
	onerror: function () {},
	// 参考：http://www.w3.org/TR/geolocation-API/#position-options
	options: {
		// 是否启用高精度请求，将开启GPS设备
		enableHighAccuracy: true,
		// 超时，1000ms
		timeout: 1000,
		// 有效期，60*60*1000ms
		maximumAge: 3600000
	}
};


// 2. 请求当前地理位置
$.geolocation("get", {
	onsuccess: function (position) {
		var v = '' + '纬度：' + position.latitude + '°\n' + '经度' + position.longitude + '°\n' + '高度' + position.altitude + 'm\n' + '精度' + position.accuracy + 'm\n' + '高精度' + position.altitudeAccuracy + 'm\n' + '角度' + position.heading + '°\n' + '速度' + position.speed + 'm/s\n';
		alert(v);
	},
	onerror: function (code) {
		if (code == 1) {
			alert("您已经禁止了共享地理位置信息，请在设置里打开允许！");
		} else if (code == 2) {
			alert("您的浏览器地理位置信息不可用！");
		} else if (code == 3) {
			alert("获取您的地理位置信息超时，请稍后再试！");
		} else {
			alert("未知的错误！");
		}
	}
});
// =>undefined

// 3. 查看当前地理位置
var watchId = $.geolocation("watch", {
	onsuccess: function (position) {
		var v = '' + '纬度：' + position.latitude + '°\n' + '经度' + position.longitude + '°\n' + '高度' + position.altitude + 'm\n' + '精度' + position.accuracy + 'm\n' + '高精度' + position.altitudeAccuracy + 'm\n' + '角度' + position.heading + '°\n' + '速度' + position.speed + 'm/s\n';
		alert(v);
	},
	onerror: function (code) {
		if (code == 1) {
			alert("您已经禁止了共享地理位置信息，请在设置里打开允许！");
		} else if (code == 2) {
			alert("您的浏览器地理位置信息不可用！");
		} else if (code == 3) {
			alert("获取您的地理位置信息超时，请稍后再试！");
		} else {
			alert("未知的错误！");
		}
	}
});
// =>watchId

// 3. 清除查看记录
$.geolocation("clear", watchId);
</pre>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">3、插件演示</div>
			<div class="panel-body">
				<div class="well">
					<p class="lead">3.1、获取地理位置信息</p>
					<button class="btn btn-success" id="button-3-1">获取地理位置</button>
				</div>

				<div class="well">
					<p class="lead">3.2、查看地理位置信息</p>
					<button class="btn btn-warning" id="button-4-1">查看地理位置</button>

				</div>

				<div class="well">
					<p class="lead">3.3、清除地理位置信息</p>
					<button class="btn btn-danger" id="button-5-1">清除地理位置</button>
				</div>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">4、插件下载</div>
			<div class="panel-body">
				<a href="/#jquery.geolocation" class="btn btn-sm btn-danger">点击前往插件下载页面</a>
			</div>
		</div>
	</div>
	<div id="footer" style="border-top:1px solid #ddd;padding:20px;margin-top:30px;">
		<ul class="list-inline">
			<li>&copy;云淡然</li>
			<li>2013 - 2014</li>
			<li>
				<a href="/">前端静态资源首页</a>
			</li>
		</ul>
	</div>
	<script src="/js/jquery/1.11.0/jquery.min.js"></script>
	<script src="/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script src="/js/prettify/r298/prettify.min.js"></script>
	<script src="latest.js"></script>
	<script>
	window.prettyPrint && prettyPrint();
	var watchId = 0;
	$("#button-3-1").click(function() {
		$.geolocation("get", {
			onsuccess: function(position) {
				var v = '纬度：' + position.latitude + '°\n' + '经度' + position.longitude + '°\n' + '高度' + position.altitude + 'm\n' + '精度' + position.accuracy + 'm\n' + '高精度' + position.altitudeAccuracy + 'm\n' + '角度' + position.heading + '°\n' + '速度' + position.speed + 'm/s\n';
				alert(v)
			},
			onerror: function(code) {
				if (code == 1) {
					alert("您已经禁止了共享地理位置信息，请在设置里打开允许！")
				} else if (code == 2) {
					alert("您的浏览器地理位置信息不可用！")
				} else if (code == 3) {
					alert("获取您的地理位置信息超时，请稍后再试！")
				} else {
					alert("未知的错误！")
				}
			}
		})
	});
	$("#button-4-1").click(function() {
		watchId = $.geolocation("watch", {
			onsuccess: function(position) {
				var v = '纬度：' + position.latitude + '°\n' + '经度' + position.longitude + '°\n' + '高度' + position.altitude + 'm\n' + '精度' + position.accuracy + 'm\n' + '高精度' + position.altitudeAccuracy + 'm\n' + '角度' + position.heading + '°\n' + '速度' + position.speed + 'm/s\n';
				alert(v)
			},
			onerror: function(code) {
				if (code == 1) {
					alert("您已经禁止了共享地理位置信息，请在设置里打开允许！")
				} else if (code == 2) {
					alert("您的浏览器地理位置信息不可用！")
				} else if (code == 3) {
					alert("获取您的地理位置信息超时，请稍后再试！")
				} else {
					alert("未知的错误！")
				}
			}
		})
	});
	$("#button-5-1").click(function() {
		if (watchId) {
			var o = $.geolocation(watchId);
			console.log(o);
			alert("已清除！")
		} else {
			alert("没有数据可以清除！")
		}
	});
	</script>
</body>

</html>
