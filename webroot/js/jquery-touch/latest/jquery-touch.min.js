/*!
 * jquery-touch
 * @author ydr.me
 * @version 1.0
 * 2014年7月12日15:30:39
 */
!function(t){"use strict";function e(t){(t.changedTouches&&1===t.changedTouches.length||t.touches&&1===t.touches.length)&&(c&&clearTimeout(c),c=0)}function n(t,e){function n(){g.forEach(function(e){e in c&&(t[e]=c[e])})}var c=e;return n(),c.touches&&c.touches.length?(c=c.touches[0],n()):c.changedTouches&&c.changedTouches.length&&(c=c.changedTouches[0],n()),t}var c,o,i,u,s=t.$,a=t.document,h=a.body,p=s(a),l={tap:{x:30,y:30,timeout:500},taphold:{x:30,y:30,timeout:750},swipe:{x:30,y:30}},r="tap taphold swipe swipeup swiperight swipedown swipeleft".split(" "),g="target detail which clientX clientY pageX pageY screenX screenY".split(" "),d=l.tap,f=l.taphold,w=l.swipe,b={};s.AUTHOR&&"ydr.me"===s.AUTHOR||(s.extend({tapSetup:function(t){s.extend(l.tap,t)},tapholdSetup:function(t){s.extend(l.taphold,t)},swipeSetup:function(t){s.extend(l.swipe,t)}}),s.each(r,function(t,e){b[e]=s.Event(e)}),p.bind("touchstart",function(t){if(t=t.originalEvent,t.touches&&1===t.touches.length){var a=t.touches[0],p=a.target,l=s.css(h,"touch-callout"),r=s.css(h,"user-select");e(t),s.css(h,"touch-callout","none"),s.css(h,"user-select","none"),o=a.pageX,i=a.pageY,u=Date.now(),c=setTimeout(function(){s.css(h,"touch-callout",l),s.css(h,"user-select",r),n(b.taphold,t),s(p).trigger(b.taphold)},f.timeout)}}),p.bind("touchmove",function(t){if(t=t.originalEvent,t.touches&&1===t.touches.length){var n=t.touches[0],u=n.target,s=Math.abs(n.pageX-o),a=Math.abs(n.pageY-i),h=u.getBoundingClientRect();n.clientX>h.left&&n.clientY>h.top&&n.clientX<h.right&&n.clientY<h.bottom&&c&&(s>f.x||a>f.y)&&e(t)}}),p.bind("touchend",function(t){t=t.originalEvent,e(t);var c=t.changedTouches[0],a=c.pageX,h=c.pageY,p=a-o,l=h-i,r=Math.abs(p),g=Math.abs(l),f=Date.now()-u,m=c.target;r<d.x&&g<d.y&&f<d.timeout&&(n(b.tap,t),s(m).trigger(b.tap)),(r>=w.x||g>=w.y)&&setTimeout(function(){var e=r>g?p>0?"right":"left":l>0?"down":"up";n(b.swipe,t),n(b["swipe"+e],t),s(m).trigger(b.swipe),s(m).trigger(b["swipe"+e])},0)}),p.bind("touchcancel",e),s(t).bind("scroll",e),s.each(r,function(t,e){s.fn[e]=function(t){return this.on(e,t)}}),s.fn.tapick=function(t){return this.bind("ontouchend"in a?"tap":"click",t)})}(this);