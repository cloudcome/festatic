/*!
 * jquery.msg.js
 * @author ydr.me
 * @versio 1.1
 * 2014年6月21日20:55:17
 */
!function(t,o){"use strict";function n(t){this.options=t}function i(t){for(var o in t)return{key:o,val:t[o]}}var e,s,u="jquery_msg____",l={duration:123,delay:3e3,buttons:null,esc:-1,title:"提示",msg:"Hi!",type:"muted",zIndex:99999,position:null};$.msg=function(t,o){var i={};return"object"===$.type(t)?i=t:2===arguments.length?(i.type=t,i.msg=o):i.msg=t,new n($.extend({},l,i))._init()},$.msg.defaults=l,$(document).on("mouseenter","."+u,function(){s&&clearTimeout(s)}).on("mouseleave","."+u,function(){s&&clearTimeout(s),e&&!e.options.buttons&&(s=setTimeout(function(){e.hide()},e.options.delay))}).on("click","."+u+" button",function(t){e&&e.hide(t)}).keyup(function(t){27==t.which&&e&&e.hide()}),n.prototype={_init:function(){var t=this,o=t.options,n=100/(o.buttons&&o.buttons.length||1)+"%",e='<div style="display:none" class="'+u+" "+u+o.type+'">';return o.title&&(e+='<div class="'+u+'title">'+o.title+"</div>"),e+='<div class="'+u+'body">'+o.msg+"</div>",o.buttons&&(t.callbacks=[],e+='<div class="'+u+'footer">',$.each(o.buttons,function(o,s){var l=i(s);e+='<button style="width:'+n+'" class="'+u+'button">'+l.key+"</button>",t.callbacks.push(l.val)}),e+="</div>",t.$bg=$("<div/>").appendTo("body").css({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:o.zIndex-1})),t.$msg=$(e+"</div>").appendTo("body"),t._show(),t},_show:function(){function n(){e=i,a.data(u,i),s&&clearTimeout(s),l.buttons||(s=setTimeout(function(){i.hide()},l.delay))}var i=this,l=i.options,a=i.$msg,c=$(t).width(),d=$(t).height(),p=a.outerWidth(),r=a.outerHeight(),f={left:l.position&&l.position.left!==o?l.position.left:(c-p)/2,top:l.position&&l.position.top!==o?l.position.top:(d-r)/3};f.left<0&&(f.left=0),f.top<0&&(f.top=0),a.css(f),e?e.hide(function(){a.fadeIn(l.duration),n()}):(a.fadeIn(l.duration),n())},hide:function(t){var n=this,i=n.options,u=n.$msg,l=$.isFunction(t),a=l?t:$.noop,c=l?o:t;s&&clearTimeout(s),s=0,u.stop(!0,!0).fadeOut(i.duration,function(){var t,o;u.remove(),e=null,n.$bg&&n.$bg.remove(),a(),!l&&n.options.buttons&&(t=c&&$(c.target).length?$(c.target).index():i.esc,o=n.callbacks.slice(t),(o=o.length?o[0]:$.noop)())})}}}(this);