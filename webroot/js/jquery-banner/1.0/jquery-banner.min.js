/*!
 * jquery.fn.banner
 * @author 云淡然 http://qianduanblog.com
 * @for ie9(含)+、chrome、firefox以及移动客户端
 * @version 1.0
 * 2013年11月24日15:45:13
 */
(function(c,e){var a,b="jquery-banner____",d={width:500,fitWidth:true,duration:678,delay:2000,auto:true,text:".text",textArr:[],direction:"right",content:".content",nav:".nav",navRewrite:true,prev:".prev",next:".next"};c.fn.banner=function(g){var f=c.extend({},d,g);return this.each(function(){var m=c(this),i=f.content?c(f.content,m):null,s=f.nav?c(f.nav,m):null,u=f.text?c(f.text,m):null,l=f.prev?c(f.prev,m):null,n=f.next?c(f.next,m):null,r=i.children(),q=r.length,v=m.width(),o=0,x=0,j=0,p=m.data(b+"hasInit")||0,w="<ul>";if(!i.length){return;}if(p){return;}if(f.fitWidth&&v<f.width){f.width=v;}if(q<2){return;}i.wrap('<div class="clearfix" style="width:'+f.width+'px;overflow:hidden;position:relative;"></div>').css({width:f.width*q});r.width(f.width).addClass("pull-left").each(function(y){c(this).data(b+"index",y);w+="<li><span>"+(y+1)+"</span></li>";}).find("img").css({"vertical-align":"top"});w+="</ul>";if(s.length){if(f.navRewrite){s.html(w);}s.find("li").eq(0).addClass("active");s.on("click","li",function(){var y=c(this).index();h(y,y<o);});}if(c.fn.swipe){i.swipe({onswipestart:function(){k();},onswipe:function(z,A){i.css("margin-left",x+z);},onswipeend:function(){i.animate({"margin-left":x},f.duration,function(){if(f.auto){t();}});},onswipeleft:function(){if(o<q-1){h(o+1);}},onswiperight:function(){if(o>0){h(o-1);}}});}m.mouseenter(function(){k();}).mouseleave(function(){if(f.auto){t();}});if(l.length){l.click(function(){if(o>0){h(o-1);}}).addClass("disabled");}if(n.length){n.click(function(){if(o<q-1){h(o+1);}});}if(f.auto){t();}function t(){if(j){clearInterval(j);j=0;}j=setInterval(function(){h(o+1,f.direction=="left");},f.delay);}function k(){i.stop(1,1);if(j){clearInterval(j);j=0;}}function h(z,y){var A=0;if(z==o){return;}if(y&&z<0){z=q-1;x=-z*f.width;}else{if(!y&&z>q-1){z=0;x=0;}else{A=o-z;x+=A*f.width;}}i.stop(1,1).animate({"margin-left":x},f.duration,function(){o=z;if(s.length){s.find("li").eq(o).addClass("active").siblings().removeClass("active");}if(u.length&&textArr.length>=q){u.html(f.textArr[o]);}o==0&&l.length?l.addClass("disabled"):l.removeClass("disabled");o==q-1&&n.length?n.addClass("disabled"):n.removeClass("disabled");});}m.data(b+"hasInit",1);});};c.fn.banner.defaults=d;})(jQuery);