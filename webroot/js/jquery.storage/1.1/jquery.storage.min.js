/*!
 * jquery.storage.js
 * @author ydr.me
 * @version 1.1
 * 2014年6月27日16:32:04
 */
!function(t,e){"use strict";function n(e){this.storage=t[e.type+"Storage"]}function r(t){return"array"===i(t)}var o={type:"local"},i=$.type,a=$.each,s={};$.storage=function(t){return new n($.extend({},o,t))},$.storage.defaults=o,n.prototype={set:function(t,e){var n,r={};"object"===i(t)?r=t:r[t]=e;for(n in r)this.storage.setItem(n,r[n])},get:function(t){var n,o=0,i={},s=this;if(t===e){for(n=s.storage.length;n>o;o++)t=s.storage.key(o),i[t]=s.storage.getItem(t);return i}return r(t)?(a(t,function(t,e){i[e]=s.storage.getItem(e)}),i):s.storage.getItem(t)},remove:function(t){var e=r(t)?t:[t],n=this;a(e,function(t,e){n.storage.removeItem(e)})},clear:function(){return this.storage.clear()},bind:function(t,e){s[t]||(s[t]=[]),s[t].push(e)},unbind:function(t,n){if(s[t]){if(n===e)return void delete s[t];var r=-1;a(s[t],function(t,e){return e===n?(r=t,!1):void 0}),~r&&s[t].splice(r,1)}}},t.addEventListener("storage",function(t){s[t.key]&&a(s[t.key],function(e,n){n(t)})})}(this);