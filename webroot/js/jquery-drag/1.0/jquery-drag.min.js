/*!
 * jquery.fn.drag
 * @author 云淡然 http://qianduanblog.com
 * @for ie9(含)+、chrome、firefox
 * @version 1.0
 * 2013年9月22日13:59:33
 */
!function(n){n.fn.drag=function(e){return this.each(function(){function t(){r.css("position")&&"static"!=r.css("position")||r.css({position:"relative",left:0,top:0})}function s(e){return l||(l=1,i.screenX=e.screenX,i.screenY=e.screenY,i.left=r.offset().left,i.top=r.offset().top,f=r.css("z-index"),r.css("z-index",a.zIndex),a.ondragstart.call(r,e),n("body").css("cursor","move")),!1}function o(e,t){return!l||n.support.draggable&&!t||r.offset({left:e.screenX-i.screenX+i.left,top:e.screenY-i.screenY+i.top}),t&&l?(r.css("z-index",f),l=0,a.ondragend.call(r,e),n("body").css("cursor",u)):a.ondrag.call(r,e),!1}var r=n(this),c={handle:"",zIndex:9999,ondragstart:function(){},ondrag:function(){},ondragend:function(){}},a=n.extend({},c,e),d=a.handle?r.find(a.handle):r,i=(n(a.zoom),{}),u=n("body").css("cursor"),f=r.css("z-index"),l=0;n.support.draggable="draggable"in document.createElement("a"),d.css("cursor","move"),t(r),n.support.draggable===!0?(r.attr("draggable",!0),r[0].addEventListener("dragstart",function(n){n.dataTransfer.setData("_",""),s(n)},!1),r[0].addEventListener("drag",function(n){o(n)},!1),r[0].addEventListener("dragend",function(n){o(n,!0)},!1)):(d.mousedown(function(n){s(n)}),n(document).mousemove(function(n){o(n)}).mouseup(function(n){o(n,!0)}))})}}(jQuery);