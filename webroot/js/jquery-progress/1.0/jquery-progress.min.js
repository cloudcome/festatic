/*!
 * jquery-progress.js
 * @author 云淡然
 * @version 1.0
 */
(function(g,h){var d="jquery-progress____",c=!!g.document.createElement("canvas").getContext,f={anticlockwiseAsc:false,beginAngle:-90,step:0.01,progress:0,begin:0,end:1,duration:6000,bgType:"arc",fgType:"arc",bgStyle:{lineCap:"butt",lineWidth:1,strokeStyle:"#ccc",fillStyle:"#ccc"},fgStyle:{lineCap:"butt",lineWidth:1,strokeStyle:"#0595FC",fillStyle:"#0595FC"},onstart:function(){},onpause:function(){},oncontinue:function(){},onstop:function(){},onprogress:function(){}};$.support.canvas=c;$.fn.progress=function(){if(!c){return;}var i=arguments;this.each(function(){var r=$(this),u=b(r,"options")||f,k=r.width(),t=r.height();if($.isNumeric(i[0])){l();b(r,"isRunning",0);j(i[0],1);}else{if(i[0]=="pause"){l();}else{if(i[0]=="continue"){o();}else{if(i[0]=="run"){n(i[1]===h?u.begin:i[1],i[2]===h?u.end:i[2],i[3]===h?u.duration:i[3]);}else{q();}}}}function q(){var w=$.extend(true,{},f,i[0]),v=((w.step+"").match(/\.(\d+)/)||["",""])[1].length-2;if(v<0){v=0;}if(v>20){v=20;}b(r,"options",w);b(r,"toFixed",v);b(r,"timer",0);b(r,"isRunning",0);b(r,"beginPercent",0);b(r,"endPercent",1);b(r,"duration",0);j(w.progress,1);}function n(w,z,A){w=w*1;z=z*1;A=A*1;var C=b(r,"timer"),y=b(r,"options"),v=b(r,"toFixed"),x=A/(Math.abs(z-w)/y.step),B=z-w<0;y.onstart(w);l(1);j(w);b(r,"isRunning",1);b(r,"endPercent",z);C=setInterval(function(){var D;A-=x;w=B?w-y.step:w+y.step;D=((w*100).toFixed(v)/100).toFixed(v+2);if(B&&D<=z||!B&&D>=z){l();j(z);b(r,"beginPercent",z);b(r,"isRunning",0);y.onstop(z);}else{b(r,"beginPercent",D);j(D);}b(r,"duration",A);},x);b(r,"timer",C);}function l(w){var v=b(r,"beginPercent"),x=b(r,"options"),y=b(r,"timer");if(y){clearInterval(y);b(r,"timer",0);!w&&x.onpause(v);}}function o(){var x=b(r,"isRunning"),v=b(r,"beginPercent"),w=b(r,"endPercent"),y=b(r,"duration"),z=b(r,"timer");if(x&&!z){n(v,w,y);u.oncontinue(v);}}function j(B){var G=b(r,"options"),w=b(r,"toFixed"),v=G.style,A=G.beginAngle,z=G.anticlockwiseAsc?A-B*360:A+B*360,E=Math.min(k/2,t/2),C=E,F=Math.min(k/2-G.bgStyle.lineWidth,t/2-G.bgStyle.lineWidth),D=Math.min(k/2-G.fgStyle.lineWidth,t/2-G.fgStyle.lineWidth);if(G.anticlockwiseAsc&&z>A||!G.anticlockwiseAsc&&z<A){z=A;}if(G.anticlockwiseAsc&&z<A-360){z=A-360;}if(!G.anticlockwiseAsc&&z>A+360){z=A+360;}p(k,t);if(G.bgType=="arc"){m(E,C,F,0,360,1);}else{s(E,C,E,0,360,1);}if(G.fgType=="arc"){m(E,C,D,A,z);}else{s(E,C,E,A,z);}G.progress=B;G.onprogress(B);b(r,"options",G);}function p(v,z){var w=r[0].getContext("2d");w.clearRect(0,0,v,z);}function m(D,C,v,z,A,B){var F=b(r,"options"),E=r[0].getContext("2d"),w=B?F.bgStyle:F.fgStyle;E.beginPath();E.arc(D,C,v,a(z),a(A),F.anticlockwiseAsc);E.lineCap=w.lineCap;E.lineWidth=w.lineWidth;E.strokeStyle=w.strokeStyle;E.stroke();E.closePath();}function s(G,F,v,A,B,C){var I=r[0].getContext("2d"),E=a(A),D=a(B),z=v*Math.cos(E)+G,H=v*Math.sin(E)+F,w=C?u.bgStyle:u.fgStyle;I.beginPath();I.arc(G,F,v,E,D,u.anticlockwiseAsc);if((D-E)%Math.PI){I.lineTo(G,F);I.lineTo(z,H);}I.fillStyle=w.fillStyle;I.fill();I.closePath();}});};$.fn.progress.defaults=f;function b(i,k,j){if(j===h){return i.data(d+k);}else{return i.data(d+k,j);}}function a(i){return i*Math.PI/180;}function e(j,i){if(i<0){}else{if(i>20){}else{return j.toFixed(i);}}}})(this);