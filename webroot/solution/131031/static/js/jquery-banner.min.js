/*!
 * jquery.fn.banner
 * @author 云淡然 http://qianduanblog.com
 * @for ie9(含)+、chrome、firefox以及移动端浏览器
 * @version 1.1
 */
(function(f,i,c){var l,h="jquery-banner____",a=f(i).width(),j=0,g=[],d={width:"auto",duration:678,delay:5000,autoPlay:true,direction:"right",contentSelector:".content",onbeforechange:function(){},onafterchange:function(){}};f.fn.banner=function(){var n=arguments,o=n.length;return this.each(function(){var s=f(this),r=b(s,"hasInit")||0;if(f.isNumeric(n[0])||n[0]=="prev"||n[0]=="next"){w(n[0]);}else{if(n[0]=="play"){u();}else{if(n[0]=="pause"){q();}else{if(!r){v();}}}}function v(){var I=f.extend({},d,n[0]),z=I.contentSelector?f(I.contentSelector,s):null,F=z.children(),C=b(s,"displayIndex")||0,x=z.width(),E=F.length,y=0,D,G,A,B,H;if(!z.length){return;}D=F.first();G=F.last();D.clone(true).insertAfter(G);G.clone(true).insertBefore(D);g.push(s);b(s,"hasInit",1);b(s,"options",I);b(s,"$content",z);b(s,"displayIndex",C);b(s,"lastItemIndex",0);b(s,"count",E);b(s,"translateX",0);b(s,"transitionTimer",0);b(s,"delayTimer",0);if(E<2){return;}z.wrap('<div class="clearfix" style="overflow:hidden;position:relative;"></div>').css({width:(E+2)+"00%"});B=z.parent();H=f('<div style="width:100%;height:0;top:0;left:0;right:0;"></div>').insertAfter(B);b(s,"$testWidth",H);y=H.width();if(I.width==="auto"){I.fitWidth=x;}else{I.fitWidth=I.width;}if(y<I.fitWidth){I.fitWidth=y;}B.width(y);F=z.children();F.width(100/(E+2)+"%").css({overflow:"hidden",display:"block","float":"left",padding:0,margin:0});p(1);if(f.fn.swipe){z.swipe({onswipestart:function(){q();A=b(s,"translateX");},onswipe:function(J,N){var L=b(s,"count"),M=e(s,L+1),K;if(A+J<M){K=M;}else{if(A+J>0){K=0;}else{K=A+J;}}b(s,"translateX",K);z.css("transform","translateX("+K+"px)");},onswipeend:function(){if(I.autoPlay){u();}},onswipeleft:function(){w("next",true);},onswiperight:function(){w("prev",true);}});}s.mouseenter(function(){q();}).mouseleave(function(){if(I.autoPlay){u();}});if(I.autoPlay){u();}}function u(){var y=b(s,"options"),x=b(s,"delayTimer");q();x=setInterval(function(){var z=b(s,"displayIndex");w(y.direction=="right"?"next":"prev");},y.delay);b(s,"delayTimer",x);}function q(){var y=b(s,"$content"),x=b(s,"delayTimer");if(x){clearInterval(x);b(s,"delayTimer",0);}}function w(A,B){var y=b(s,"options"),z=b(s,"count"),x=b(s,"displayIndex"),C=0;b(s,"lastItemIndex",-1);if(A=="prev"){if(x==0){b(s,"lastItemIndex",z+1);x=z-1;}else{x--;}}else{if(A=="next"){if(x==z-1){b(s,"lastItemIndex",0);x=0;}else{x++;}}else{x=A;}}y.onbeforechange.call(s[0],x);t(x,A=="prev",B);}function t(G,A,D){var y=b(s,"$content"),I=b(s,"$items"),H=b(s,"count"),J=b(s,"lastItemIndex")*1,F=b(s,"transitionTimer"),L=b(s,"options"),x=G+1,C=e(s,x),B=b(s,"translateX"),K=0,E=e(s,1),z=e(s,H);if(D){if(B>E){K=z-(L.fitWidth-(B-E));}else{if(B<z){K=E-(z-B)+L.fitWidth;}}if(K!=0){y.css("transform","translateX("+K+"px)");}}else{if(J>=0){p(J);}}setTimeout(function(){y.css({transform:"translateX("+C+"px)","transition-duration":L.duration+"ms"});b(s,"displayIndex",G);L.onafterchange.call(s[0],G);},1);F=setTimeout(function(){p(x);},L.duration);b(s,"transitionTimer",F);}function p(y){var x=b(s,"$content"),z=b(s,"transitionTimer"),A=e(s,y);if(z){clearTimeout(z);b(s,"transitionTimer",0);}x.css({transform:"translateX("+A+"px)","transition-duration":"0"});b(s,"translateX",A);}});};f(i).resize(function(){if(j){clearTimeout(j);j=0;}j=setTimeout(function(){var n=f(i).width();if(a!=n){m();a=n;}},123);});function b(o,p,n){if(n===c){return o.data(h+p);}else{return o.data(h+p,n);}}function m(){f.each(g,function(r,s){var q=b(s,"options"),p=b(s,"$content"),o=b(s,"$testWidth"),u=b(s,"count"),n=b(s,"displayIndex"),t=o.width();if(q.width!="auto"&&q.width<t){t=q.width;}p.parent().width(t);q.fitWidth=t;b(s,"options",q);p.css("transform","translateX("+e(s,n+1)+"px)");});}function e(o,p){var n=b(o,"options");return -p*n.fitWidth;}function k(n){}f.fn.banner.defaults=d;})($,this);